graph TD
    subgraph "Frontend (React + TypeScript)"
        direction TB

        subgraph "State & API Management"
            AuthContext["AuthContext (User, Token, Auth Status)"]
            ApiService["Central API Service (Axios with Interceptors)"]
            useLearningPath["useLearningPath Hook (State for Lessons)"]
            AuthContext --> ApiService
            ApiService --> AuthContext
        end

        subgraph "Core App Screens (Mobile First)"
            direction LR
            HomePage(Home)
            LessonsPage(Lessons)
            PracticePage(Practice)
            ProgressPage(Progress)
            ProfilePage(Profile)
        end

        subgraph "UI Components"
            MainLayout["MainLayout (Mobile Frame)"]
            BottomNav["BottomTabNavigation"]
            LearningPath["LearningPath.tsx"]
            LearningUnit["LearningUnit.tsx"]
            LessonNode["LessonNode.tsx"]
        end

        MainLayout --> BottomNav
        MainLayout --> HomePage
        MainLayout --> LessonsPage
        MainLayout --> PracticePage
        MainLayout --> ProgressPage
        MainLayout --> ProfilePage
        
        LessonsPage --> LearningPath
        LearningPath --> LearningUnit
        LearningUnit --> LessonNode
        
        AuthContext -- "Provides auth state" --> MainLayout
        useLearningPath -- "Fetches data via" --> ApiService
        LessonNode -- "Navigates to" --> LessonPage(Lesson Detail Page)
    end

    subgraph "Backend API (Node.js + Express)"
        direction TB
        
        subgraph "Core Routes"
            AuthRoutes["auth.routes.ts"]
            ProgressRoutes["progress.routes.ts"]
            LearningPathRoutes["learningPath.routes.ts"]
        end

        subgraph "Controllers"
            AuthController["auth.controller.ts"]
            ProgressController["progress.controller.ts"]
            LearningPathController["learningPath.controller.ts"]
        end

        subgraph "Services"
            AuthService["auth.service.ts"]
            ProgressService["progress.service.ts"]
            LearningPathService["learningPath.service.ts"]
        end
        
        AuthRoutes --> AuthController --> AuthService
        ProgressRoutes --> ProgressController --> ProgressService
        LearningPathRoutes --> LearningPathController --> LearningPathService
    end

    subgraph "Data Layer (SQLite + Knex.js)"
        direction TB
        Users["users"]
        UserProgress["user_progress"]
        LearningPaths["learning_paths"]
        LearningUnits["learning_units"]
        Lessons["lessons"]
        UserLessonProgress["user_lesson_progress"]
        Achievements["achievements"]
        
        AuthService --> Users
        ProgressService --> UserProgress
        LearningPathService --> LearningPaths
        LearningPathService --> LearningUnits
        LearningPathService --> Lessons
        LearningPathService --> UserLessonProgress
    end

    subgraph "External Services & Deployment"
        GitHub["GitHub Repository"]
        Vercel["Vercel Hosting"]
        AI_Tutor["AI Tutor Service (Future)"]
        
        GitHub -- "CI/CD" --> Vercel
        Vercel -- "Serves" --> Frontend
    end

    ApiService -- "Makes calls to" --> AuthRoutes
    ApiService -- "Makes calls to" --> ProgressRoutes
    ApiService -- "Makes calls to" --> LearningPathRoutes
