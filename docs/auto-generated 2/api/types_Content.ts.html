<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>types/Content.ts - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AIGenerationError.html">AIGenerationError</a></li><li><a href="AIMetricsService.html">AIMetricsService</a></li><li><a href="AIOrchestrator.html">AIOrchestrator</a><ul class='methods'><li data-type='method'><a href="AIOrchestrator.html#assessPronunciation">assessPronunciation</a></li><li data-type='method'><a href="AIOrchestrator.html#generateContent">generateContent</a></li><li data-type='method'><a href="AIOrchestrator.html#generateStubbedContent">generateStubbedContent</a></li><li data-type='method'><a href="AIOrchestrator.html#gradeResponse">gradeResponse</a></li><li data-type='method'><a href="AIOrchestrator.html#hashString">hashString</a></li></ul></li><li><a href="BaseEnhancer.html">BaseEnhancer</a></li><li><a href="BaseValidator.html">BaseValidator</a><ul class='methods'><li data-type='method'><a href="BaseValidator.html#checkArrayNonEmpty">checkArrayNonEmpty</a></li><li data-type='method'><a href="BaseValidator.html#checkNonEmpty">checkNonEmpty</a></li></ul></li><li><a href="CacheService.html">CacheService</a><ul class='methods'><li data-type='method'><a href="CacheService.html#clear">clear</a></li><li data-type='method'><a href="CacheService.html#get">get</a></li><li data-type='method'><a href="CacheService.html#getStats">getStats</a></li><li data-type='method'><a href="CacheService.html#set">set</a></li></ul></li><li><a href="CacheService_CacheService.html">CacheService</a></li><li><a href="ContentGenerationJobHandler.html">ContentGenerationJobHandler</a><ul class='methods'><li data-type='method'><a href="ContentGenerationJobHandler.html#handleJob">handleJob</a></li></ul></li><li><a href="ContentGenerationJobQueue.html">ContentGenerationJobQueue</a><ul class='methods'><li data-type='method'><a href="ContentGenerationJobQueue.html#addJob">addJob</a></li><li data-type='method'><a href="ContentGenerationJobQueue.html#getJob">getJob</a></li></ul></li><li><a href="ContextService.html">ContextService</a><ul class='methods'><li data-type='method'><a href="ContextService.html#fetchAndBuildContext">fetchAndBuildContext</a></li><li data-type='method'><a href="ContextService.html#getAIUserContext">getAIUserContext</a></li><li data-type='method'><a href="ContextService.html#getUserContext">getUserContext</a></li><li data-type='method'><a href="ContextService.html#updateContext">updateContext</a></li></ul></li><li><a href="DatabaseJobQueueService.html">DatabaseJobQueueService</a><ul class='methods'><li data-type='method'><a href="DatabaseJobQueueService.html#calculateProgress">calculateProgress</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#cancelJob">cancelJob</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#enqueueJob">enqueueJob</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#getJobResult">getJobResult</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#getJobStatus">getJobStatus</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#getNextJob">getNextJob</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#listJobsByUser">listJobsByUser</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#setJobResult">setJobResult</a></li><li data-type='method'><a href="DatabaseJobQueueService.html#updateJobStatus">updateJobStatus</a></li></ul></li><li><a href="DynamicContentGenerator.html">DynamicContentGenerator</a><ul class='methods'><li data-type='method'><a href="DynamicContentGenerator.html#generateContent">generateContent</a></li></ul></li><li><a href="ExerciseValidator.html">ExerciseValidator</a><ul class='methods'><li data-type='method'><a href="ExerciseValidator.html#validate">validate</a></li></ul></li><li><a href="FallbackHandler.html">FallbackHandler</a><ul class='methods'><li data-type='method'><a href="FallbackHandler.html#getConfigurationSummary">getConfigurationSummary</a></li><li data-type='method'><a href="FallbackHandler.html#getFallback">getFallback</a></li><li data-type='method'><a href="FallbackHandler.html#validateAllConfigurations">validateAllConfigurations</a></li><li data-type='method'><a href="FallbackHandler.html#validateFallbackConfig">validateFallbackConfig</a></li></ul></li><li><a href="FallbackHandler_FallbackHandler.html">FallbackHandler</a></li><li><a href="LearningPathController.html">LearningPathController</a><ul class='methods'><li data-type='method'><a href="LearningPathController.html#completeLesson">completeLesson</a></li><li data-type='method'><a href="LearningPathController.html#getLearningPathForUser">getLearningPathForUser</a></li><li data-type='method'><a href="LearningPathController.html#startLesson">startLesson</a></li></ul></li><li><a href="LessonEnhancer.html">LessonEnhancer</a><ul class='methods'><li data-type='method'><a href="LessonEnhancer.html#enhance">enhance</a></li></ul></li><li><a href="LessonValidator.html">LessonValidator</a><ul class='methods'><li data-type='method'><a href="LessonValidator.html#validate">validate</a></li></ul></li><li><a href="PromptTemplateEngine.html">PromptTemplateEngine</a><ul class='methods'><li data-type='method'><a href="PromptTemplateEngine.html#generateContentPrompt">generateContentPrompt</a></li></ul></li><li><a href="RateLimitService.html">RateLimitService</a><ul class='methods'><li data-type='method'><a href="RateLimitService.html#cleanup">cleanup</a></li><li data-type='method'><a href="RateLimitService.html#getGlobalStats">getGlobalStats</a></li><li data-type='method'><a href="RateLimitService.html#getStatus">getStatus</a></li><li data-type='method'><a href="RateLimitService.html#isAllowed">isAllowed</a></li><li data-type='method'><a href="RateLimitService.html#resetUserLimit">resetUserLimit</a></li></ul></li><li><a href="RateLimitService_RateLimitService.html">RateLimitService</a></li><li><a href="VocabularyValidator.html">VocabularyValidator</a><ul class='methods'><li data-type='method'><a href="VocabularyValidator.html#validate">validate</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="ILogger.html">ILogger</a></li><li></li><li></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#AIVocabularyItemSchema">AIVocabularyItemSchema</a></li><li><a href="global.html#AIVocabularyListSchema">AIVocabularyListSchema</a></li><li><a href="global.html#QUEUE_NAMES">QUEUE_NAMES</a></li><li><a href="global.html#UserContentAssignmentModel">UserContentAssignmentModel</a></li><li><a href="global.html#adminTestController">adminTestController</a></li><li><a href="global.html#assessPronunciation">assessPronunciation</a></li><li><a href="global.html#assessPronunciationPayloadSchema">assessPronunciationPayloadSchema</a></li><li><a href="global.html#cancelJob">cancelJob</a></li><li><a href="global.html#chatWithAI">chatWithAI</a></li><li><a href="global.html#completeUserLesson">completeUserLesson</a></li><li><a href="global.html#contentGenerationJobQueue">contentGenerationJobQueue</a></li><li><a href="global.html#createContent">createContent</a></li><li><a href="global.html#createContentItem">createContentItem</a></li><li><a href="global.html#createContentType">createContentType</a></li><li><a href="global.html#createLogger">createLogger</a></li><li><a href="global.html#createTopic">createTopic</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#deleteContent">deleteContent</a></li><li><a href="global.html#deleteContentItemById">deleteContentItemById</a></li><li><a href="global.html#deleteContentType">deleteContentType</a></li><li><a href="global.html#deleteTopicById">deleteTopicById</a></li><li><a href="global.html#findByUserId">findByUserId</a></li><li><a href="global.html#formatValidationError">formatValidationError</a></li><li><a href="global.html#generateContentAsync">generateContentAsync</a></li><li><a href="global.html#generateContentId">generateContentId</a></li><li><a href="global.html#generateLesson">generateLesson</a></li><li><a href="global.html#generateLessonPayloadSchema">generateLessonPayloadSchema</a></li><li><a href="global.html#getAllContent">getAllContent</a></li><li><a href="global.html#getAllContentItems">getAllContentItems</a></li><li><a href="global.html#getAllContentTypes">getAllContentTypes</a></li><li><a href="global.html#getAllTopics">getAllTopics</a></li><li><a href="global.html#getAllUsers">getAllUsers</a></li><li><a href="global.html#getAnalyticsSummary">getAnalyticsSummary</a></li><li><a href="global.html#getAssignedContent">getAssignedContent</a></li><li><a href="global.html#getContentById">getContentById</a></li><li><a href="global.html#getContentByTopicId">getContentByTopicId</a></li><li><a href="global.html#getContentItemById">getContentItemById</a></li><li><a href="global.html#getCurrentUserProfile">getCurrentUserProfile</a></li><li><a href="global.html#getGenerationStatus">getGenerationStatus</a></li><li><a href="global.html#getInternalUserByEmailWithPassword">getInternalUserByEmailWithPassword</a></li><li><a href="global.html#getLearningPathUserView">getLearningPathUserView</a></li><li><a href="global.html#getPrompts">getPrompts</a></li><li><a href="global.html#getTopicById">getTopicById</a></li><li><a href="global.html#getUserByEmail">getUserByEmail</a></li><li><a href="global.html#getUserById">getUserById</a></li><li><a href="global.html#getUserPreferences">getUserPreferences</a></li><li><a href="global.html#getUserProgress">getUserProgress</a></li><li><a href="global.html#gradeResponse">gradeResponse</a></li><li><a href="global.html#gradeResponsePayloadSchema">gradeResponsePayloadSchema</a></li><li><a href="global.html#handleAIRequest">handleAIRequest</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#isLesson">isLesson</a></li><li><a href="global.html#listJobs">listJobs</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#paginationSchema">paginationSchema</a></li><li><a href="global.html#recordContentItemProgress">recordContentItemProgress</a></li><li><a href="global.html#redisConnection">redisConnection</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#startUserLesson">startUserLesson</a></li><li><a href="global.html#taskHandlerMap">taskHandlerMap</a></li><li><a href="global.html#updateContent">updateContent</a></li><li><a href="global.html#updateContentItemById">updateContentItemById</a></li><li><a href="global.html#updateContentType">updateContentType</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#updateUserPreferences">updateUserPreferences</a></li><li><a href="global.html#updateUserProfile">updateUserProfile</a></li><li><a href="global.html#upsert">upsert</a></li><li><a href="global.html#validateAIPayload">validateAIPayload</a></li><li><a href="global.html#validationSchemaMap">validationSchemaMap</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">types/Content.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Enhanced Content Types for AI-Driven Dynamic Content Generation
// Follows existing codebase patterns and implements strict type safety

import { v4 as uuidv4 } from 'uuid';

// ========================================
// CONTENT REQUEST TYPES
// ========================================

/**
 * Groups content generation options for better organization
 * TODO: Reference Future Implementation #29 - Enhanced Exercise Type System
 */
export interface ContentGenerationOptions {
  includeExercises?: boolean;
  includeCulturalContext?: boolean;
  includeAudio?: boolean;
  includeExamples?: boolean;
  adaptToWeaknesses?: boolean;
  reinforcePreviousLearning?: boolean;
  includeMoreExamples?: boolean;
}

/**
 * Content generation request with improved organization and validation
 * TODO: Reference Future Implementation #21 - AI Type System Schema Validation Integration
 */
export interface ContentRequest {
  userId: number;
  type: ContentType;
  level?: string;
  topics?: string[];
  duration?: number; // in minutes
  focusAreas?: string[];
  learningStyle?: 'visual' | 'auditory' | 'kinesthetic' | 'mixed';
  vocabulary?: string[];
  context?: string;
  grammarFocus?: string;
  difficulty?: 'beginner' | 'intermediate' | 'advanced' | 'adaptive';
  exerciseCount?: number;
  culturalTopic?: string;
  options?: ContentGenerationOptions;
}

// ========================================
// CONTENT RESPONSE TYPES
// ========================================

/**
 * Generated content with robust ID generation and metadata
 */
export interface GeneratedContent {
  id: string; // Generated using UUID for guaranteed uniqueness
  type: ContentType;
  content: StructuredContent;
  metadata: ContentMetadata;
  validation: ContentValidation;
  estimatedCompletionTime: number; // in minutes
  learningObjectives: string[];
}

export interface ContentMetadata {
  userId: number;
  generatedAt: Date;
  level: string;
  topics: string[];
  aiGenerated: boolean;
  version: string;
  fallback?: boolean;
  generationTime?: number; // milliseconds
  tokenUsage?: number;
  modelUsed?: string;
}

export interface ContentValidation {
  isValid: boolean;
  /** A score from 0 to 1 indicating the quality and relevance of the content */
  score: number;
  issues: string[];
  suggestions?: string[];
  /** A score from 0 to 1 indicating the AI's confidence in its own validation */
  confidence?: number;
}

// ========================================
// CONTENT TEMPLATES &amp; CONTEXT
// ========================================

export interface ContentTemplate {
  structure: Record&lt;string, string>;
  requirements: Record&lt;string, any>;
  adaptations?: Record&lt;string, string>;
  prompts?: Record&lt;string, string>;
}

export interface LearningContext {
  userId: number;
  currentLevel: string;
  learningStyle: string;
  weakAreas: string[];
  strengths: string[];
  interests: string[];
  recentTopics: string[];
  performanceHistory: any[]; // TODO: Define proper type for performance records
  lastActivity?: Date;
  streakDays?: number;
  totalLessons?: number;
}

// ========================================
// CONTENT TYPE DEFINITIONS
// ========================================

export type ContentType =
  | 'lesson'
  | 'vocabulary_drill'
  | 'grammar_exercise'
  | 'cultural_content'
  | 'personalized_exercise'
  | 'pronunciation_drill'
  | 'conversation_practice';

// ========================================
// STRUCTURED CONTENT TYPES
// ========================================

/**
 * Base interface for all structured content types (DRY principle)
 */
export interface BaseStructuredContent {
  type: ContentType;
  title: string;
  description: string;
  learningObjectives: string[];
  estimatedTime: number; // in minutes
}

/**
 * Discriminated union for type-safe content structures
 */
export type StructuredContent =
  | IStructuredLesson
  | IStructuredVocabularyDrill
  | IStructuredGrammarExercise
  | IStructuredCulturalContent
  | IStructuredPersonalizedExercise;

export interface IStructuredLesson extends BaseStructuredContent {
  type: 'lesson';
  sections: LessonSection[];
  vocabulary: VocabularyItem[];
  grammar?: GrammarConcept;
  culturalNotes?: CulturalNote[];
}

export interface IStructuredVocabularyDrill extends BaseStructuredContent {
  type: 'vocabulary_drill';
  context: string;
  vocabulary: VocabularyItem[];
  exercises: Exercise[];
  culturalContext?: string;
}

export interface IStructuredGrammarExercise extends BaseStructuredContent {
  type: 'grammar_exercise';
  grammarRule: string;
  explanation: string;
  examples: string[];
  exercises: Exercise[];
  tips: string[];
  commonMistakes: string[];
}

export interface IStructuredCulturalContent extends BaseStructuredContent {
  type: 'cultural_content';
  topic: string;
  keyPoints: string[];
  vocabulary: VocabularyItem[];
  discussionQuestions: string[];
  multimedia?: MultimediaItem[];
  connections: string[];
}

export interface IStructuredPersonalizedExercise extends BaseStructuredContent {
  type: 'personalized_exercise';
  focusAreas: string[];
  exercises: Exercise[];
  adaptiveElements: AdaptiveElement[];
}

// ========================================
// SUPPORTING CONTENT INTERFACES
// ========================================

export interface LessonSection {
  type: 'introduction' | 'presentation' | 'practice' | 'wrap_up';
  title: string;
  content: string;
  duration: number; // in minutes
  vocabulary?: VocabularyItem[];
  grammar?: GrammarConcept;
  exercises?: Exercise[];
}

export interface VocabularyItem {
  word: string;
  definition: string;
  pronunciation: string;
  ipa?: string;
  examples: string[];
  image?: string;
  audio?: string;
  difficulty: 'easy' | 'medium' | 'hard';
  culturalContext?: string;
  regionalVariations?: string[];
}

export interface GrammarConcept {
  rule: string;
  explanation: string;
  examples: string[];
  exceptions?: string[];
}

export interface CulturalNote {
  title: string;
  content: string;
  relevance: string;
}

export interface MultimediaItem {
  type: 'image' | 'audio' | 'video';
  url: string;
  description: string;
  alt?: string;
}

export interface AdaptiveElement {
  condition: string;
  content: any;
  trigger: string;
}

// ========================================
// ENHANCED EXERCISE TYPE SYSTEM
// ========================================

/**
 * Exercise interface with strongly-typed items
 * Addresses Future Implementation #29 - Enhanced Exercise Type System
 */
export interface Exercise {
  type: ExerciseType;
  instruction: string;
  items: ExerciseItem[];
  feedback: string;
  difficulty?: 'easy' | 'medium' | 'hard';
  estimatedTime?: number; // in minutes
}

export type ExerciseType =
  | 'multiple_choice'
  | 'fill_in_blank'
  | 'matching'
  | 'ordering'
  | 'true_false'
  | 'drag_drop'
  | 'listening_comprehension'
  | 'pronunciation_practice';

/**
 * Discriminated union for strongly-typed exercise items
 * Replaces the problematic `any[]` from original design
 */
export type ExerciseItem =
  | MultipleChoiceItem
  | FillInBlankItem
  | MatchingItem
  | OrderingItem
  | TrueFalseItem
  | DragDropItem
  | ListeningComprehensionItem
  | PronunciationPracticeItem;

export interface MultipleChoiceItem {
  type: 'multiple_choice';
  question: string;
  options: string[];
  correctAnswer: number; // index of correct option
  explanation?: string;
}

export interface FillInBlankItem {
  type: 'fill_in_blank';
  sentence: string;
  blanks: BlankPosition[];
  correctAnswers: string[];
  hints?: string[];
}

export interface BlankPosition {
  position: number; // character position in sentence
  length: number; // expected answer length
}

export interface MatchingItem {
  type: 'matching';
  leftColumn: string[];
  rightColumn: string[];
  correctMatches: MatchPair[];
}

export interface MatchPair {
  leftIndex: number;
  rightIndex: number;
}

export interface OrderingItem {
  type: 'ordering';
  items: string[];
  correctOrder: number[]; // indices representing correct sequence
}

export interface TrueFalseItem {
  type: 'true_false';
  statement: string;
  correctAnswer: boolean;
  explanation?: string;
}

export interface DragDropItem {
  type: 'drag_drop';
  instruction: string;
  draggableItems: DraggableItem[];
  dropZones: DropZone[];
}

export interface DraggableItem {
  id: string;
  content: string;
  correctZoneId: string;
}

export interface DropZone {
  id: string;
  label: string;
  acceptsMultiple?: boolean;
}

export interface ListeningComprehensionItem {
  type: 'listening_comprehension';
  audioUrl: string;
  transcript?: string; // for validation, not shown to user
  questions: MultipleChoiceItem[] | FillInBlankItem[];
}

export interface PronunciationPracticeItem {
  type: 'pronunciation_practice';
  targetPhrase: string;
  ipa: string;
  audioExample: string;
  hints: string[];
}

// ========================================
// UTILITY FUNCTIONS
// ========================================

/**
 * Generates a unique content ID using UUID
 * Replaces the insecure Date.now() + Math.random() approach
 */
export function generateContentId(): string {
  return `content_${uuidv4()}`;
}

/**
 * Type guard functions for content type checking
 */
export function isLesson(content: StructuredContent): content is IStructuredLesson {
  return content.type === 'lesson';
}

export function isVocabularyDrill(content: StructuredContent): content is IStructuredVocabularyDrill {
  return content.type === 'vocabulary_drill';
}

export function isGrammarExercise(content: StructuredContent): content is IStructuredGrammarExercise {
  return content.type === 'grammar_exercise';
}

export function isCulturalContent(content: StructuredContent): content is IStructuredCulturalContent {
  return content.type === 'cultural_content';
}

export function isPersonalizedExercise(content: StructuredContent): content is IStructuredPersonalizedExercise {
  return content.type === 'personalized_exercise';
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri Jul 04 2025 19:07:31 GMT+0200 (Central European Summer Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
